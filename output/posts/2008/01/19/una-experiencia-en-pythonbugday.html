<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Una experiencia en PythonBugDay | En borrador permanente</title>

    
            <link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">

    
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">

      <link rel="canonical" href="http://www.juanjoconti.com.ar/posts/2008/01/19/una-experiencia-en-pythonbugday.html">




    
        <!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]-->

    


    

    <meta name="author" content="Juanjo">
        <link rel="prev" href="../14/el-sol-desnudo.html" title="El sol desnudo" type="text/html">
        <link rel="next" href="../../02/07/codigo-secreto-juego.html" title="Código Secreto (juego)" type="text/html">
    
    <meta property="og:site_name" content="En borrador permanente">
    <meta property="og:title" content="Una experiencia en PythonBugDay">
    <meta property="og:url" content="http://www.juanjoconti.com.ar/posts/2008/01/19/una-experiencia-en-pythonbugday.html">
    <meta property="og:description" content="Hoy se llevó a cabo el octavo Python Bug Day. Sabía que era en estos días pero no lo tenía presente ni se me había ocurrido participar. Al mediodía Facundo Batista me lo recuerda por chat y me pregunt">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2008-01-19T16:46:09+00:00">
           <meta property="article:tag" content="Aprendiendo Python">
           <meta property="article:tag" content="bugs">
           <meta property="article:tag" content="Eventos">
           <meta property="article:tag" content="Python">

    

    



</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.juanjoconti.com.ar/">

                <span id="blog-title">En borrador permanente</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li>
<a href="../../../../archive.html">Archives</a>
                </li>
<li>
<a href="../../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../../rss.xml">RSS feed</a>

                
            </li>
</ul>

            <ul class="nav navbar-nav navbar-right">
                
                
                    
    <li>
    <a href="una-experiencia-en-pythonbugday.wp" id="sourcelink">Código fuente</a>
    </li>

                
            </ul>
        </div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav>

<!-- End of Menubar -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <header>
        
    <h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Una experiencia en PythonBugDay</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Juanjo</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2008-01-19T16:46:09+00:00" itemprop="datePublished" title="2008-01-19 16:46">2008-01-19 16:46</time></a></p>
                <p class="commentline">
        
    <a href="una-experiencia-en-pythonbugday.html#disqus_thread" data-disqus-identifier="cache/posts/2008/01/19/una-experiencia-en-pythonbugday.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="una-experiencia-en-pythonbugday.wp" id="sourcelink">Código fuente</a></p>

        </div>
        

    </header>

    <div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p></p>
<p>Hoy se llevó a cabo el octavo <a href="http://wiki.python.org/moin/PythonBugDay" title="PBD" target="_blank">Python Bug Day</a>. Sabía que era en estos días pero no lo tenía presente ni se me había ocurrido participar. Al mediodía <a href="http://www.taniquetil.com.ar/plog/" title="Facu" target="_blank">Facundo Batista</a> me lo recuerda por chat y me pregunto... ¿Por qué no? Puedo probar unas horas, ver que pasa, nunca compilé Python tal vez tenga que hacerlo para probar una solución.</p>
<p>Me dieron una lista de <a href="http://www.taniquetil.com.ar/cgi-bin/pytickets.py?nropag=0&amp;priority=0&amp;severity=0&amp;component=0&amp;version=0&amp;keyword=6" title="easy bugs" target="_blank">bugs fáciles</a>.  Y elejí este: <a href="http://bugs.python.org/issue1779" title="1779" target="_blank">1779</a>. El bug en particular podría haber sido resuelto en pocos minutos por un desaarrollador de Python. Es más, el mismo había sido reportado por el creador del lenguaje :D Pero como bien dice en uno de los comentarios, es un buen bug para el Python Bug Day. A un experto, resolverlo no le habría costado nada, pero tampoco le habría aportado nada. A un novato como a mi me sirvió para conocer algo del nucleo del lenguaje y el proceso que hay que seguir para resolver un bug:</p>
<p></p>
<ol>
<pre class="code literal-block"><span class="nt">&lt;li&gt;</span>Bajar la última versión del código fuente<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Compilar<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Correr los tests para ver que todo ande bien<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span> Encontrar el bug y arreglarlo<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Correr los tests nuevamente<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Arreglar los tests que fallan<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Agregar tests que prueben el arreglo<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Correr los tests nuevamente<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Armar un parche<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li&gt;</span>Envair el parche<span class="nt">&lt;/li&gt;</span>
</pre>


</ol>

<!--more-->

<p>El bug, que continuará en las versiones previas de Python pero ya está corregido en Python 3000, es el siguiente:</p>
<p><code></code></p>
<p>&gt;&gt;&gt; int("- 1")</p>
<p>-1</p>
<p>&gt;&gt;&gt; float("- 1")</p>
<p>Traceback (most recent call last):</p>
<p>File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ValueError: invalid literal for float(): - 1</p>
<p></p>
<p>Cuando se quiere crear un número a partir de un string, no pueden haber espacios en blanco entre el signo (+ o -) y el número. El comportamiento correcto es el de la función <code>float</code>. El de <code>int</code> es errorneo. Necesita ser arreglado.</p>
<p><strong>Obtener el código fuente</strong></p>
<p>Bajé del servidor svn la última versión de Python 3000, la nueva versión del lenguaje, para el cual el bug estaba abierto:</p>
<p><code>svn co http://svn.python.org/projects/python/branches/py3k/</code></p>
<p>(Esto llevó bastante tiempo. Mientras tanto cociné y almorcé.)</p>
<p><strong>Compilar</strong></p>
<p><code>cd py3k/</code></p>
<p>./configure &amp;&amp; make</p>
<p><strong>Correr el intérprete compilado</strong></p>
<p><code>./python</code></p>
<p><strong>Correr los tests</strong></p>
<p><code>make test</code></p>
<p>o</p>
<p><code>./python Lib/test/regrtest.py</code></p>
<p><strong>Arreglar el bug</strong></p>
<p>En los comentarios sel bug se decía que era simple de resolver y que no consistía más que en comentar 2 líneas en un archivo en C.</p>
<p>Revisé el archivo <code>Objects/longobject.c</code> y luego de entender como funcionaba la función <code>PyLong_FromString(char <em>str, char </em>*pend, int base)</code>, comenté las líneas 1688 y 1689. Problema resuelto!</p>
<p>Compilé para que mis cambios se vean reflejados.</p>
<p><code>make</code></p>
<p>Y probé en el intérprete.</p>
<p><code>&gt;&gt;&gt; int("- 1")</code></p>
<p>Traceback (most recent call last):</p>
<p>File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ValueError: invalid literal for int() with base 10: '- 1'</p>
<p>Perfecto!</p>
<p>Luego corrí las pruebas afectadas por mi cambio y fallaron.</p>
<p><code>./python Lib/test/test_builtin.py</code></p>
<p>La función en particular era <code>test_int(self)</code>. Luego de una mirada rápida, comenté los valores de una lista que hacían fallar la prueba y pensé que con eso era suficiente. Consulté y me dijeron que también agregue mi cambio en Misc/NEWS. Lo hice. Lo siguiente era generar el parche.</p>
<p><code>svn diff | tee bug_fix_for_1779.diff</code></p>
<p>El mismo está en <a href="http://bugs.python.org/file9220" title="first patch" target="_blank">http://bugs.python.org/file9220</a>.</p>
<p>Luego lo vio Facundo y me dijo que tenía que tenía que agregar pruebas para mi parche. Me llevó bastante tiempo entender como funcionaba la prueba. Finalmente, luego de preguntar bastante conseguí el resultado deseado. Volví a generar un parche y a subirlo.</p>
<p><code>svn diff | tee bug_fix_for_1779-plustests.diff</code></p>
<p><a href="http://bugs.python.org/file9228" title="patch2" target="_blank">http://bugs.python.org/file9228</a></p>
<p><strong>La experiencia</strong></p>
<p>La verdad es que la experiencia fue muy buena. En unas 5 horas aprendí mucho sobre Python en si y sobre su ciclo de desarrollo, interactué con una comunidad despuesta a darte una mano cuando la necesitás y arreglé un error en el lenguaje que más uso. <em>Voilá!</em> Muchas gracias Comunidad de Python por organizar este Python Bug Day.</p>
</div>
    </div>
    <aside class="postpromonav">
    <nav>
    
        <ul itemprop="keywords" class="tags">
           <li><a class="tag p-category" href="../../../../categories/aprendiendo-python.html" rel="tag">Aprendiendo Python</a></li>
           <li><a class="tag p-category" href="../../../../categories/bugs.html" rel="tag">bugs</a></li>
           <li><a class="tag p-category" href="../../../../categories/eventos.html" rel="tag">Eventos</a></li>
           <li><a class="tag p-category" href="../../../../categories/python.html" rel="tag">Python</a></li>
        </ul>

    
        <ul class="pager">
            <li class="previous">
                <a href="../14/el-sol-desnudo.html" rel="prev" title="El sol desnudo">Publicación anterior</a>
            </li>
            <li class="next">
                <a href="../../02/07/codigo-secreto-juego.html" rel="next" title="Código Secreto (juego)">Siguiente publicación</a>
            </li>
        </ul>

    </nav>
    </aside>
        <section class="comments">
        <h2>Comentarios</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nikolademo",
            disqus_url="http://www.juanjoconti.com.ar/posts/2008/01/19/una-experiencia-en-pythonbugday.html",
        disqus_title="Una experiencia en PythonBugDay",
        disqus_identifier="cache/posts/2008/01/19/una-experiencia-en-pythonbugday.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section>
    

</article>

        
       <script>var disqus_shortname="nikolademo";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>



        </div>
        <!--End of body content-->

        <footer>
            Contents © 2015         <a href="mailto:jjconti@gmail.com">Juanjo</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
    </div>
</div>


            <script src="../../../../assets/js/all-nocdn.js"></script>
        <script src="../../../../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script>$('a.image-reference:not(.islink)').colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
    <!-- fancy dates -->
    <script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script>
    <!-- end fancy dates -->
    


</body>
</html>
